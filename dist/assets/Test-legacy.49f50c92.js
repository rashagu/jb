const _excluded=["url"],_excluded2=["url"],_excluded3=["queryKey","isNoMore","listKey"],_excluded4=["data","params","queries","run","reset","cancel"];function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function asyncGeneratorStep(e,t,n,r,o,a,l){try{var i=e[a](l),u=i.value}catch(c){return void n(c)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function l(e){asyncGeneratorStep(a,r,o,l,i,"next",e)}function i(e){asyncGeneratorStep(a,r,o,l,i,"throw",e)}l(void 0)}))}}System.register(["./vendor-legacy.a005ae79.js"],(function(e){"use strict";var t,n,r,o,a,l,i,u,c,s,d,v,f,p,y,h,m;return{setters:[function(e){t=e.d,n=e.aq,r=e.ar,o=e.p,a=e.as,l=e.U,i=e.W,u=e.q,c=e.a9,s=e.at,d=e.f,v=e.r,f=e.j,p=e.k,y=e.w,h=e.l,m=e.y}],execute:function(){const g={},b=Symbol("GLOBAL_OPTIONS_PROVIDE_KEY"),w=()=>g;t({name:"RequestConfig",props:{config:{type:Object,required:!0}},setup(e,{slots:t}){const{config:r}=e;return n(b,r),()=>{var e;return null===(e=t.default)||void 0===e?void 0:e.call(t)}}});const E=Object.prototype.toString,O=e=>E.call(e),j=e=>"[object String]"===O(e),_=e=>"[object Object]"===O(e),S=e=>null!==e&&"object"==typeof e,T=e=>e instanceof Function,I=e=>null==e,P="undefined"==typeof window,L=()=>{var e,t;return!P&&"visible"===(null===(e=window)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.visibilityState)},x=()=>{var e,t,n;return null===(e=!P&&(null===(t=window)||void 0===t||null===(n=t.navigator)||void 0===n?void 0:n.onLine))||void 0===e||e},R=Promise.resolve(null),W=function(){var e=_asyncToGenerator((function*(...e){const t=yield fetch(...e);if(t.ok)return t.json();throw new Error(t.statusText)}));return function(){return e.apply(this,arguments)}}();function q(e,t,n){let r,o,a,l,i,u,c=0,s=!1,d=!1,v=!0;const f=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){const n=r,a=o;return r=o=void 0,c=t,l=e.apply(a,n),l}function y(e,t){return f?(window.cancelAnimationFrame(i),window.requestAnimationFrame(e)):setTimeout(e,t)}function h(e){const n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=a}function m(){const e=Date.now();if(h(e))return g(e);i=y(m,function(e){const n=e-c,r=t-(e-u);return d?Math.min(r,a-n):r}(e))}function g(e){return i=void 0,v&&r?p(e):(r=o=void 0,l)}function b(...e){const n=Date.now(),a=h(n);if(r=e,o=this,u=n,a){if(void 0===i)return function(e){return c=e,i=y(m,t),s?p(e):l}(u);if(d)return i=y(m,t),p(u)}return void 0===i&&(i=y(m,t)),l}return t=+t||0,S(n)&&(s=!!n.leading,d="maxWait"in n,a=d?Math.max(+n.maxWait||0,t):a,v="trailing"in n?!!n.trailing:v),b.cancel=function(){void 0!==i&&function(e){if(f)return window.cancelAnimationFrame(e);clearTimeout(e)}(i),c=0,r=u=o=i=void 0},b.flush=function(){return void 0===i?l:g(Date.now())},b.pending=function(){return void 0!==i},b}var D;const K=new Set,M=new Set,k=new Set,A=(e,t)=>{let n;switch(e){case"FOCUS_LISTENER":n=K;break;case"RECONNECT_LISTENER":n=k;break;case"VISIBLE_LISTENER":n=M}if(!n.has(t))return n.add(t),()=>{n.delete(t)}},N=e=>{e.forEach((e=>{e()}))};!P&&null!==(D=window)&&void 0!==D&&D.addEventListener&&(window.addEventListener("visibilitychange",(()=>{L()&&N(M)}),!1),window.addEventListener("focus",(()=>N(K)),!1),window.addEventListener("online",(()=>N(k)),!1));const C=(e,t,n)=>{var r,a,i;const{initialAutoRunFlag:u,initialData:c,loadingDelay:s,pollingInterval:d,debounceInterval:v,throttleInterval:f,pollingWhenHidden:p,pollingWhenOffline:y,errorRetryCount:h,errorRetryInterval:m,stopPollingWhenHiddenOrOffline:g,refreshOnWindowFocus:b,refocusTimespan:w,updateCache:E,formatResult:O,onSuccess:j,onError:_,onBefore:P,onAfter:W}=t,D=o(0),K=o(null!==(r=null==n?void 0:n.loading)&&void 0!==r&&r),M=o(null!==(a=null==n?void 0:n.data)&&void 0!==a?a:c),k=o(null==n?void 0:n.error),N=o(null!==(i=null==n?void 0:n.params)&&void 0!==i?i:[]),C=(F={loading:K,data:M,error:k,params:N},G=[e=>E(e)],e=>{Object.keys(e).forEach((t=>{F[t].value=e[t]})),G.forEach((e=>e(F)))});var F,G;const U=()=>{D.value=0},B=o(0),H=o(),Q=o(),V=o(),Y=()=>{H.value&&H.value(),V.value&&V.value(),Q.value&&Q.value()},z=l((()=>{if(m)return m;return 1e3*Math.floor(Math.random()*2**Math.min(D.value,9)+1)})),$=(...t)=>{C({loading:!s,params:t}),V.value=(()=>{let e;return s&&(e=setTimeout(C,s,{loading:!0})),()=>e&&clearTimeout(e)})(),B.value+=1;const n=B.value;return null==P||P(t),e(...t).then((e=>{if(n===B.value){const n=O?O(e):e;return C({data:n,loading:!1,error:void 0}),j&&j(n,t),U(),n}return R})).catch((e=>(n===B.value&&(C({data:void 0,loading:!1,error:e}),_&&_(e,t),console.error(e)),R))).finally((()=>{n===B.value&&(V.value(),Q.value=(e=>{let t;const n=-1===h,r=D.value<h;return k.value&&(n||r)&&(n||(D.value+=1),t=setTimeout(e,z.value)),()=>t&&clearTimeout(t)})((()=>$(...t))),H.value=(e=>{if(k.value&&0!==h)return;let t;if(!I(d)&&d>=0){if(!p&&!L()||!y&&!x())return void(g.value=!0);t=setTimeout(e,d)}return()=>t&&clearTimeout(t)})((()=>$(...t))),null==W||W(t))}))},J=!I(v)&&q($,v),X=!I(f)&&function(e,t,n){let r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return S(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),q(e,t,{leading:r,trailing:o,maxWait:t})}($,f,{leading:!0,trailing:!0}),Z=(...e)=>(Y(),!u.value&&J?(J(...e),R):X?(X(...e),R):(U(),$(...e))),ee=()=>Z(...N.value),te=[],ne=e=>{e&&te.push(e)},re=()=>{g.value&&(p||L())&&(y||x())&&(ee(),g.value=!1)};p||ne(A("VISIBLE_LISTENER",re)),y||ne(A("RECONNECT_LISTENER",re));const oe=((e,t)=>{let n=!1;return(...r)=>{n||(n=!0,e(...r),setTimeout((()=>{n=!1}),t))}})(ee,w);b&&(ne(A("VISIBLE_LISTENER",oe)),ne(A("FOCUS_LISTENER",oe)));return{loading:K,data:M,error:k,params:N,run:Z,cancel:()=>{B.value+=1,C({loading:!1}),J&&J.cancel(),X&&X.cancel(),Y()},refresh:ee,mutate:e=>{const t=T(e)?e(M.value):e;C({data:t})},unmount:()=>{te.forEach((e=>e()))}}},F=new Map,G=e=>{if(I(e))return;const t=F.get(e);return t?{data:t.data,cacheTime:t.cacheTime}:void 0},U="__QUERY_DEFAULT_KEY__";function B(e,t){const n=r(b,{}),{initialData:d,pollingInterval:v,debounceInterval:f,throttleInterval:p,cacheKey:y,defaultParams:h=[],manual:m=!1,ready:g=o(!0),refreshDeps:E=[],loadingDelay:O=0,pollingWhenHidden:j=!1,pollingWhenOffline:_=!1,refreshOnWindowFocus:S=!1,refocusTimespan:T=5e3,cacheTime:I=6e5,staleTime:P=0,errorRetryCount:L=0,errorRetryInterval:x=0,queryKey:W,formatResult:q,onSuccess:D,onError:K,onBefore:M,onAfter:k}=_objectSpread(_objectSpread(_objectSpread({},w()),n),t),A=o(!1),N=o(!1),B={initialAutoRunFlag:N,initialData:d,loadingDelay:O,pollingInterval:v,debounceInterval:f,throttleInterval:p,pollingWhenHidden:j,pollingWhenOffline:_,stopPollingWhenHiddenOrOffline:A,cacheKey:y,errorRetryCount:L,errorRetryInterval:x,refreshOnWindowFocus:S,refocusTimespan:T,updateCache:e=>{var t,n;if(!y)return;const r=null===(t=G(y))||void 0===t?void 0:t.data,o=null==r?void 0:r.queries,a=(e=>{const t={};return Object.keys(e).forEach((n=>{t[n]=s(e[n])})),t})(e),l=null!==(n=null==W?void 0:W(...e.params.value))&&void 0!==n?n:U;((e,t,n)=>{const r=F.get(e);null!=r&&r.timer&&clearTimeout(r.timer);const o=setTimeout((()=>F.delete(e)),n);F.set(e,{data:t,timer:o,cacheTime:(new Date).getTime()})})(y,{queries:_objectSpread(_objectSpread({},o),{},{[l]:_objectSpread(_objectSpread({},null==o?void 0:o[l]),a)}),latestQueriesKey:l},I)},formatResult:q,onSuccess:D,onError:K,onBefore:M,onAfter:k},H=o(!1),Q=o(),V=o(),Y=o(),z=i({[U]:i(C(e,B))}),$=o(U),J=l((()=>{var e;return null!==(e=z[$.value])&&void 0!==e?e:{}}));if(a((()=>{H.value=J.value.loading,Q.value=J.value.data,V.value=J.value.error,Y.value=J.value.params}),{flush:"sync"}),y){var X;const t=G(y);null!=t&&null!==(X=t.data)&&void 0!==X&&X.queries&&(Object.keys(t.data.queries).forEach((n=>{const r=t.data.queries[n];z[n]=i(C(e,B,{loading:r.loading,params:r.params,data:r.data,error:r.error}))})),t.data.latestQueriesKey&&($.value=t.data.latestQueriesKey))}const Z=o(),ee=o(!1),te=(...t)=>{var n;if(!g.value&&!ee.value)return Z.value=t,R;const r=null!==(n=null==W?void 0:W(...t))&&void 0!==n?n:U;return z[r]||(z[r]=i(C(e,B))),$.value=r,J.value.run(...t)},ne=()=>{Object.keys(z).forEach((e=>{z[e].cancel(),z[e].unmount(),delete z[e]}))};if(!m){var re;N.value=!0;const e=G(y),t=null!==(re=null==e?void 0:e.data.queries)&&void 0!==re?re:{},n=e&&(-1===P||e.cacheTime+P>(new Date).getTime()),r=Object.keys(t).length>0;n||(r?Object.keys(z).forEach((e=>{var t;null===(t=z[e])||void 0===t||t.refresh()})):te(...h)),N.value=!1}const oe=o();return oe.value=u(g,(e=>{ee.value=!0,e&&Z.value&&(te(...Z.value),oe.value())}),{flush:"sync"}),E.length&&u(E,(()=>{!m&&J.value.refresh()})),c((()=>{ne()})),{loading:H,data:Q,error:V,params:Y,cancel:()=>J.value.cancel(),refresh:()=>J.value.refresh(),mutate:e=>J.value.mutate(e),run:te,reset:()=>{ne(),$.value=U,z[U]=i(C(e,B))},queries:z}}var H=e=>{let t;if(T(e))t=(...t)=>{const n=e(...t);let r;if(S(o=n)&&T(o.then)&&T(o.catch))r=n;else if(_(n)){const{url:e}=n,t=_objectWithoutProperties(n,_excluded);r=W(e,t)}else{if(!j(n))throw new Error("Unknown service type");r=W(n)}var o;return new Promise(((e,t)=>{r.then(e).catch(t)}))};else if(_(e)){const{url:n}=e,r=_objectWithoutProperties(e,_excluded2);t=()=>W(n,r)}else{if(!j(e))throw Error("Unknown service type");t=()=>W(e)}return t};function Q(e,t){var n;if(!T(e))throw new Error("useLoadMore only support function service");const i=H(e),u=r(b,{}),c=Object.assign({listKey:null!==(n=u.listKey)&&void 0!==n?n:w().listKey},null!=t?t:{}),{queryKey:s,isNoMore:d,listKey:v="list"}=c,f=_objectWithoutProperties(c,_excluded3);if(s)throw new Error("useLoadMore does not support concurrent request");const p=o(!1),y=o(!1),h=o(!1),m=o(0),g=B(i,_objectSpread(_objectSpread({},f),{},{onSuccess:(...e)=>{var t;y.value=!1,m.value++,null==f||null===(t=f.onSuccess)||void 0===t||t.call(f,...e)},onError:(...e)=>{var t;y.value=!1,null==f||null===(t=f.onError)||void 0===t||t.call(f,...e)},queryKey:()=>String(m.value)})),{data:E,params:O,queries:j,run:_,reset:S,cancel:I}=g,P=_objectWithoutProperties(g,_excluded4),L=o(E.value);a((()=>{void 0!==E.value&&(L.value=E.value)}));const x=l((()=>!(!d||!T(d))&&d(L.value))),R=l((()=>{let e=[];return Object.values(j).forEach((t=>{const n=((e,t,n)=>{const r=t.replace(/\[(\d+)\]/g,".$1").split(".");let o=e;for(const a of r)if(o=Object(o)[a],void 0===o)return n;return o})(t.data,v);n&&Array.isArray(n)&&(e=e.concat(n))})),e})),W=function(){var e=_asyncToGenerator((function*(){p.value=!0;const e=m.value-1,t=e<0?0:e;L.value=j[t].data,m.value=0;const[,...n]=O.value,r=[void 0,...n];yield _(...r),Object.keys(j).forEach((e=>{e!==(0).toString()&&(j[e].cancel(),j[e].unmount(),delete j[e])})),p.value=!1}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=_asyncToGenerator((function*(){h.value=!0,S(),m.value=0,L.value=void 0;const[,...e]=O.value,t=[void 0,...e];yield _(...t),h.value=!1}));return function(){return e.apply(this,arguments)}}();return _objectSpread({data:L,dataList:R,params:O,noMore:x,loadingMore:y,refreshing:p,reloading:h,run:_,reload:q,loadMore:()=>{if(x.value)return;y.value=!0;const[,...e]=O.value,t=[{dataList:R.value,data:L.value},...e];_(...t)},reset:S,refresh:W,cancel:()=>{I(),y.value=!1,p.value=!1}},function(e,t){const n=Object.assign({},e);for(const r of t)delete n[r];return n}(P,["refresh","mutate"]))}const V=()=>"https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo";var Y=e("default",t({setup(){const{t:e,locale:t}=d(),{dataList:n,loading:r,loadingMore:o,loadMore:a}=Q(V,{listKey:"results"});return{loading:r,loadingMore:o,dataList:n,loadMore:a,t:e}}}));const z=h("a",null,"edit",-1),$=h("a",null,"more",-1),J={href:"https://www.antdv.com/"},X=h("div",null,"content",-1);Y.render=function(e,t,n,r,o,a){const l=v("a-list-item-meta"),i=v("a-list-item"),u=v("a-list");return f(),p(u,{class:"demo-loadmore-list",loading:e.loading,"item-layout":"horizontal","data-source":e.dataList},{loadMore:y((()=>[h("div",{onClick:t[1]||(t[1]=(...t)=>e.loadMore&&e.loadMore(...t)),style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},m(e.t("login")),1)])),renderItem:y((({item:e})=>[h(i,null,{actions:y((()=>[z,$])),default:y((()=>[h(l,{description:"Ant Design, a design language for background applications, is refined by Ant UED Team"},{title:y((()=>[h("a",J,m(e.name.last),1)])),_:2},1024),X])),_:2},1024)])),_:1},8,["loading","data-source"])}}}}));
